<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <!-- Default CSS -->
    <link rel="stylesheet" href="style.css" />
    <title>absensi_rapat_sa</title>
  </head>
  <body>
    <!-- HEADER -->
    <div class="header">
      <h2 class="text-center mb-5 mt-4">
        ABSENSI RAPAT PANITIA SA <br />
        TEKNIK INFORMATIKA <br />ANGKATAN 2022
      </h2>
    </div>
    <!-- HERO IMG -->
    <div class="img-hero mt-4 mb-5">
      <img src="img/logoif.png" class="img-fluid" />
    </div>
    <!-- ALERT -->
    <div
      class="alert alert-success ms-5 me-5 text-center d-none my-alert"
      role="alert"
    >
      <strong>Terima kasih!</strong> Pesan anda sudah kami terima :)
    </div>
    <!-- FORM -->
    <form name="submit-absensi-panitiaSA" class="ms-5 me-5">
      <!-- Name -->
      <div class="mb-4">
        <label for="exampleFormControlInput1" class="form-label">Nama</label>
        <input
          name="nama"
          type="text"
          class="form-control name-input"
          id="exampleFormControlInput1"
          placeholder="* isi dengan nama lengkap"
        />
      </div>
      <!-- Divisi -->
      <div class="divisi mb-4">
        <label for="exampleFormControlInput1" class="form-label">Divisi</label>
        <select
          name="divisi"
          class="form-select divisi-select"
          aria-label="Default select example"
        >
          <option>Ketua pelaksana</option>
          <option>Wakil ketua pelaksana</option>
          <option>Sekretaris 1</option>
          <option>Sekretaris 2</option>
          <option>Bendahara 1</option>
          <option>Bendahara 2</option>
          <option>Kordinator lapangan</option>
          <option>Hubungan masyarakat</option>
          <option>Kesekretariatan</option>
          <option>Acara</option>
          <option>Logistik</option>
          <option>Konsumsi</option>
          <option>Publikasi dekorasi & dokumentasi</option>
          <option>Keamanan</option>
          <option>Dana usaha</option>
        </select>
      </div>
      <!-- Date -->
      <div class="mb-4">
        <label for="exampleFormControlInput1" class="form-label">Tanggal</label>
        <input
          name="tanggal"
          type="date"
          class="form-control date-input"
          id="exampleFormControlInput1"
        />
      </div>
      <!-- Button -->
      <button
        name="button-send"
        type="button submit"
        class="btn btn-primary button-send btn-kirim"
      >
        Kirim
      </button>
      <button
        name="button-loading"
        class="btn btn-primary button-loading d-none btn-loading"
        type="button"
        disabled
      >
        <span
          class="spinner-grow spinner-grow-sm"
          role="status"
          aria-hidden="true"
        ></span>
        Loading...
      </button>
    </form>
    <!-- FOOTER -->
    <footer>
      <p class="text-center">
        Copyright
        <a
          href="https://instagram.com/unpas.informatika22?igshid=NDk5N2NlZjQ="
          target="
        "
          >@unpas.informatika22</a
        >
      </p>
    </footer>
    <!-- Script JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <!-- Script Sheets -->
    <script>
      const scriptURL =
        "https://script.google.com/macros/s/AKfycbwz8CYyvWdJ7KJXh43d30wiwqFCQ-ckHgMa6CH0cRj3YlmMRZEVOpXhpjqqSB3ZbFflcg/exec";
      const form = document.forms["submit-absensi-panitiaSA"];
      const btnKirim = document.querySelector(".btn-kirim");
      const btnLoading = document.querySelector(".btn-loading");
      const myAlert = document.querySelector(".my-alert");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        // ketika tombol submit diklik
        // tampilkan tombol loading, hilangkan kirim
        btnLoading.classList.toggle("d-none");
        btnKirim.classList.toggle("d-none");
        fetch(scriptURL, { method: "POST", body: new FormData(form) })
          .then((response) => {
            // tampilkan kirim, hilangkan loading
            btnLoading.classList.toggle("d-none");
            btnKirim.classList.toggle("d-none");
            // tampilkan alert
            myAlert.classList.toggle("d-none");
            // reset
            form.reset();
            console.log("Success!", response);
          })
          .catch((error) => console.error("Error!", error.message));
      });
    </script>
  </body>
</html>
